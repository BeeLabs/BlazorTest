@page "/"
@using BlazorTree

<h1>Hello, world!</h1>

Welcome to your new app.

<SurveyPrompt Title="How is Blazor working for you?" />

<TreeView Dependents="@People" Context="person" TreeLine="-">
    <ClosedContent>
        <span class="oi oi-plus"> @(person.Firstname) @(person.Surname) (@(person.Age)) </span>
    </ClosedContent>
    <OpenContent>
        <span class="oi oi-minus"> @(person.Firstname) @(person.Surname) (@(person.Age)) </span>
    </OpenContent>
</TreeView>


@functions
{
  IEnumerable<Person> People;
  protected override void OnInit()
  {
      base.OnInit();
      Random count = new Random();
      People = A.ListOf<Person>(count.Next(3,8));
      foreach (Person person in People)
      {
          person.Dependents = A.ListOf<Person>(count.Next(2,4));
          foreach (Person person2 in person.Dependents)
          {
              person2.Dependents = A.ListOf<Person>(count.Next(1,3));
          }
      }
  }
  public class Person : INodeItem<Person>
  {
      public string Surname { get; set; }
      public string Firstname { get; set; }
      public int Age { get; set; }
      public IEnumerable<Person> Dependents { get; set; }
      public int Depth { get; set; }
  }

}